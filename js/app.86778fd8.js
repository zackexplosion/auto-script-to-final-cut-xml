(function(){var e={5448:function(e,t,n){const r=n(5648);function a(e){var t=new r(e[e.length-1]["end"]);return t=new r(t.toFixed(0)).times(3e3).toNumber(),`<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE fcpxml>\n\n<fcpxml version="1.8">\n  <resources>\n    <format id="r1" name="FFVideoFormat1080p30" frameDuration="100/3000s" width="1920" height="1080" colorSpace="1-1-1 (Rec. 709)"/>\n    <effect id="r2" name="自定" uid=".../Titles.localized/Build In:Out.localized/Custom.localized/Custom.moti"/>\n  </resources>\n  <library location="file:///Users/wu/Movies/365days.fcpbundle/">\n    <event name="crossub" uid="9BC389E8-726D-4F37-B274-671F36300264">\n      <project name="18.45.22.script.srt.PvDnxv" uid="03A8F412-A9EE-48D0-BA73-49999E9D2F63" modDate="2022-10-19 18:45:22 +0800">\n        <sequence duration="${t}/3000s" format="r1" tcStart="0s" tcFormat="NDF" audioLayout="stereo" audioRate="48k">\n          <spine>\n            <gap name="空隙" offset="0s" duration="${t}/3000s">\n              ${e.map(o).join("\n")}\n            </gap>\n          </spine>\n        </sequence>\n      </project>\n    </event>\n    <smart-collection name="项目" match="all">\n      <match-clip rule="is" type="project"/>\n    </smart-collection>\n    <smart-collection name="所有视频" match="any">\n      <match-media rule="is" type="videoOnly"/>\n      <match-media rule="is" type="videoWithAudio"/>\n    </smart-collection>\n    <smart-collection name="仅音频" match="all">\n      <match-media rule="is" type="audioOnly"/>\n    </smart-collection>\n    <smart-collection name="静止图像" match="all">\n      <match-media rule="is" type="stills"/>\n    </smart-collection>\n    <smart-collection name="个人收藏" match="all">\n      <match-ratings value="favorites"/>\n    </smart-collection>\n  </library>\n</fcpxml>`}function o(e,t){var n=new r(e.end.toFixed(1)).minus(e.start.toFixed(1)).times(3e3);n=parseFloat(n);var a=new r(e.start.toFixed(1)).times(3e3);a=parseFloat(a);var o=`<title name="${e.id}-自訂" lane="1" offset="${a}/3000s" ref="r2" duration="${n}/3000s">\n<param name="位置" key="9999/10199/10201/1/100/101" value="0 -415"/>\n<param name="对齐" key="9999/10199/10201/2/354/1002961760/401" value="1 (居中)"/>\n<param name="Out Sequencing" key="9999/10199/10201/4/10233/201/202" value="0 (到)"/>\n\n<text>\n  <text-style ref="ts${t}">${e.id}</text-style>\n</text>\n<text-style-def id="ts${t}">\n  <text-style font="Helvetica" fontSize="63" fontFace="Regular" fontColor="1 1 1 1" alignment="center"/>\n</text-style-def>\n</title>`;return o}r.DP=1,e.exports=a},9991:function(e,t,n){"use strict";var r=n(9242),a=n(3396),o=n(7139);const i=["href"],l={class:"buttons"},u=(0,a._)("span",null,"2.選擇其他音訊檔",-1),s=(0,a._)("footer",null,[(0,a._)("div",{id:"waveform"}),(0,a._)("div",{id:"wave-timeline"})],-1),c={id:"flex-container"},p=(0,a._)("h2",null,"3.輸入文字稿",-1),d=(0,a._)("h2",null,"InputScript",-1),h=(0,a._)("h2",null,"4.FCPXML",-1);function m(e,t,n,m,f,v){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("span",null,[(0,a.Uk)("1."),(0,a._)("a",{class:"azure-ai",href:f.azureLink,target:"_blank"},(0,o.zw)(f.azureLink),9,i)]),(0,a._)("div",l,[u,(0,a._)("input",{type:"file",onChange:t[0]||(t[0]=(...e)=>v.audioSourceChanged&&v.audioSourceChanged(...e))},null,32),(0,a._)("label",null,[(0,a.Uk)(" peakThreshold : "+(0,o.zw)(f.peakThreshold)+" ",1),(0,a.wy)((0,a._)("input",{type:"range",min:"0.0001",max:"0.005",step:"0.0001","onUpdate:modelValue":t[1]||(t[1]=e=>f.peakThreshold=e),onInput:t[2]||(t[2]=e=>v.createTitles())},null,544),[[r.nr,f.peakThreshold]])]),(0,a._)("label",null,[(0,a.Uk)(" spaceCounterThreshold : "+(0,o.zw)(f.spaceCounterThreshold)+" ",1),(0,a.wy)((0,a._)("input",{type:"range",min:"1",max:"1000","onUpdate:modelValue":t[3]||(t[3]=e=>f.spaceCounterThreshold=e),onInput:t[4]||(t[4]=e=>v.createTitles())},null,544),[[r.nr,f.spaceCounterThreshold]])]),(0,a._)("button",{onClick:t[5]||(t[5]=e=>f.wavesurfer.play(0))},"Play From Start"),(0,a._)("button",{onClick:t[6]||(t[6]=e=>f.wavesurfer.playPause())},"Play")]),s,(0,a._)("div",c,[(0,a._)("div",null,[p,(0,a.wy)((0,a._)("textarea",{id:"input-script","onUpdate:modelValue":t[7]||(t[7]=e=>f.inputScript=e),onKeyup:t[8]||(t[8]=e=>v.createTitles())},null,544),[[r.nr,f.inputScript]])]),(0,a._)("div",null,[d,(0,a._)("pre",null,(0,o.zw)(v.inputScriptArray)+"\n\nArray Length : "+(0,o.zw)(v.inputScriptArray.length)+"\n      ",1)]),(0,a._)("div",null,[h,(0,a.wy)((0,a._)("textarea",{class:"xml-debug","onUpdate:modelValue":t[9]||(t[9]=e=>f.fcpxml=e)},null,512),[[r.nr,f.fcpxml]])])])],64)}n(7658),n(3408),n(4590);var f=n(9730),v=n.n(f),g=n(2495),y=n.n(g),w=n(5375),_=n.n(w),b=n(7809),x=n.n(b),T=n(6389),k=n(5448),S=n.n(k),C="硬質化是部分九大巨人所擁有的能力，使用硬質化可以強化身體硬度來增加防禦或攻擊力，但也會消耗自身的體力，不同巨人對硬質化的運用有所不同，部分巨人只能硬化皮膚或用硬質化製造無規律物品，而對硬質化運用熟練的巨人不僅可隨意製造武器或是建築，甚至能硬質化出有彈性的物體。\n\n不同的巨人硬質化的硬度有所不同，同一硬度的硬質化，硬質化越集中則越堅硬，反之，硬質化越分散則越脆。\n\n並非所有巨人都擁有硬質化的能力，無硬質化能力的九大巨人之力擁有者可通過喝下“鎧甲藥劑”來獲得硬質化的能力。",F={name:"App",components:{},data(){return{fcpxml:"",inputScript:C,wavesurfer:void 0,peaks:[],spaceCounterThreshold:218,peakThreshold:5e-4,resolution:1e3,createTitleDebounce:null,azureLink:"https://azure.microsoft.com/zh-tw/products/cognitive-services/text-to-speech/#overview"}},mounted(){this.createWaveSurfer()},methods:{createTitles(){clearTimeout(this.createTitleDebounce),this.createTitleDebounce=setTimeout((()=>{this._createTitles()}),300)},_createTitles(){var{inputScriptArray:e,wavesurfer:t}=this;this.fcpxml="",t.clearRegions();var n=new T.Z(t.getDuration()),r=t.backend.getPeaks(n/2*this.resolution),a=0,o=0,i=[];for(let u=0;u<r.length;u++){const t=r[u];var l=new T.Z(u+1).div(this.resolution).toNumber();let n=r[u+1];if(Math.abs(t)<=this.peakThreshold)o+=1;else if(l>1&&o>=this.spaceCounterThreshold&&Math.abs(n)>=this.peakThreshold){if(o=0,i.length>=e.length)break;i.push({id:e[i.length],start:a,end:l,drag:!1,duration:new T.Z(l).minus(a).toNumber()}),a=l}}if(e[e.length-1]!==e[i.length-1]){const t=i[i.length-1]["end"];i.push({id:e[e.length-1],start:t,end:n.toNumber(),duration:n.minus(t).toNumber()})}i[i.length-1]["end"]=n.toNumber();for(let u=0;u<i.length;u++){const e=i[u];setTimeout((()=>{t.addRegion(e)}),10*u)}this.fcpxml=S()(i),console.table(i)},audioSourceChanged(e){var t=this.wavesurfer,n=e.target.files[0];if(n){var r=new FileReader;r.onload=function(e){var n=new window.Blob([new Uint8Array(e.target.result)]);t.loadBlob(n)},r.onerror=function(e){console.error("An error ocurred reading the file: ",e)},r.readAsArrayBuffer(n)}},createWaveSurfer(){console.log("createWaveSurfer");var e=v().create({container:"#waveform",progressColor:"purple",normalize:!0,minPxPerSec:50,height:300,scrollParent:!0,plugins:[x().create({container:"#wave-timeline"}),_().create(),y().create({drag:!1})]});e.load("./2022-10-19 07_17_55.mp3"),e.on("ready",(()=>{console.log("wavesurfer ready"),this.createTitles()})),e.on("seek",(t=>{e.play(t*e.getDuration()),console.log("currentTime",t*e.getDuration())})),this.wavesurfer=e}},computed:{inputScriptArray(){console.log("inputScriptArray changed");var e=[];return this.inputScript.toString().split("\n").forEach((t=>{let n=t.split(/，|？/);n.forEach((t=>{t.split("?"),t.length>0&&(t=t.replace("。",""),t=t.replaceAll('"',""),t=t.replaceAll(",",""),t=t.trim(),e.push(t))}))})),e}}},A=n(89);const z=(0,A.Z)(F,[["render",m]]);var D=z;(0,r.ri)(D).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var l=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(l=!1,o<i&&(i=o));if(l){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,i=r[0],l=r[1],u=r[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(u)var c=u(n)}for(t&&t(r);s<i.length;s++)o=i[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkauto_script_to_final_cut_xml"]=self["webpackChunkauto_script_to_final_cut_xml"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(9991)}));r=n.O(r)})();
//# sourceMappingURL=app.86778fd8.js.map