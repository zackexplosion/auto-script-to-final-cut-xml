{"version":3,"file":"js/app.86778fd8.js","mappings":"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","sources":["webpack://auto-script-to-final-cut-xml/./src/createXML.js","webpack://auto-script-to-final-cut-xml/./src/App.vue","webpack://auto-script-to-final-cut-xml/./src/App.vue?7ccd","webpack://auto-script-to-final-cut-xml/./src/main.js","webpack://auto-script-to-final-cut-xml/webpack/bootstrap","webpack://auto-script-to-final-cut-xml/webpack/runtime/chunk loaded","webpack://auto-script-to-final-cut-xml/webpack/runtime/compat get default export","webpack://auto-script-to-final-cut-xml/webpack/runtime/define property getters","webpack://auto-script-to-final-cut-xml/webpack/runtime/global","webpack://auto-script-to-final-cut-xml/webpack/runtime/hasOwnProperty shorthand","webpack://auto-script-to-final-cut-xml/webpack/runtime/jsonp chunk loading","webpack://auto-script-to-final-cut-xml/webpack/startup"],"sourcesContent":["const Big = require('big.js')\nBig.DP = 1\nfunction createXML(titles) {\nvar totalDuration = new Big(titles[titles.length - 1]['end'])\n\ntotalDuration = new Big(totalDuration.toFixed(0)).times(30 * 100).toNumber()\nreturn `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE fcpxml>\n\n<fcpxml version=\"1.8\">\n  <resources>\n    <format id=\"r1\" name=\"FFVideoFormat1080p30\" frameDuration=\"100/3000s\" width=\"1920\" height=\"1080\" colorSpace=\"1-1-1 (Rec. 709)\"/>\n    <effect id=\"r2\" name=\"自定\" uid=\".../Titles.localized/Build In:Out.localized/Custom.localized/Custom.moti\"/>\n  </resources>\n  <library location=\"file:///Users/wu/Movies/365days.fcpbundle/\">\n    <event name=\"crossub\" uid=\"9BC389E8-726D-4F37-B274-671F36300264\">\n      <project name=\"18.45.22.script.srt.PvDnxv\" uid=\"03A8F412-A9EE-48D0-BA73-49999E9D2F63\" modDate=\"2022-10-19 18:45:22 +0800\">\n        <sequence duration=\"${totalDuration}/3000s\" format=\"r1\" tcStart=\"0s\" tcFormat=\"NDF\" audioLayout=\"stereo\" audioRate=\"48k\">\n          <spine>\n            <gap name=\"空隙\" offset=\"0s\" duration=\"${totalDuration}/3000s\">\n              ${titles.map(createTitle).join('\\n')}\n            </gap>\n          </spine>\n        </sequence>\n      </project>\n    </event>\n    <smart-collection name=\"项目\" match=\"all\">\n      <match-clip rule=\"is\" type=\"project\"/>\n    </smart-collection>\n    <smart-collection name=\"所有视频\" match=\"any\">\n      <match-media rule=\"is\" type=\"videoOnly\"/>\n      <match-media rule=\"is\" type=\"videoWithAudio\"/>\n    </smart-collection>\n    <smart-collection name=\"仅音频\" match=\"all\">\n      <match-media rule=\"is\" type=\"audioOnly\"/>\n    </smart-collection>\n    <smart-collection name=\"静止图像\" match=\"all\">\n      <match-media rule=\"is\" type=\"stills\"/>\n    </smart-collection>\n    <smart-collection name=\"个人收藏\" match=\"all\">\n      <match-ratings value=\"favorites\"/>\n    </smart-collection>\n  </library>\n</fcpxml>`\n}\n\nfunction createTitle(title, index) {\n  // 15000/3000s = 2\n  var duration = new Big(title.end.toFixed(1)).minus(title.start.toFixed(1)).times(30 * 100)\n  duration = parseFloat(duration)\n  var offset = new Big(title.start.toFixed(1)).times(30 * 100)\n  offset = parseFloat(offset)\n\n  // var offset = title.start\n\n  // console.log(`duration:  ${duration} ${duration/3000}`, 'offset: ' + offset, title.start, title.end, title.id)\n  // console.log('duration', duration, 'offset', offset)\n  var tmp = `<title name=\"${title.id}-自訂\" lane=\"1\" offset=\"${offset}/3000s\" ref=\"r2\" duration=\"${duration}/3000s\">\n<param name=\"位置\" key=\"9999/10199/10201/1/100/101\" value=\"0 -415\"/>\n<param name=\"对齐\" key=\"9999/10199/10201/2/354/1002961760/401\" value=\"1 (居中)\"/>\n<param name=\"Out Sequencing\" key=\"9999/10199/10201/4/10233/201/202\" value=\"0 (到)\"/>\n\n<text>\n  <text-style ref=\"ts${index}\">${title.id}</text-style>\n</text>\n<text-style-def id=\"ts${index}\">\n  <text-style font=\"Helvetica\" fontSize=\"63\" fontFace=\"Regular\" fontColor=\"1 1 1 1\" alignment=\"center\"/>\n</text-style-def>\n</title>`\n\n  return tmp\n}\n\n\n\nmodule.exports = createXML","\n\n<template>\n  <!-- <img alt=\"Vue logo\" src=\"./assets/logo.png\"> -->\n  <!-- <HelloWorld msg=\"Welcome to Your Vue.js App\"/> -->\n\n  <span>1.<a class=\"azure-ai\" :href=\"azureLink\" target=\"_blank\">{{azureLink}}</a></span>\n\n  <div class=\"buttons\">\n    <span>2.選擇其他音訊檔</span>\n    <input type=\"file\" @change=\"audioSourceChanged\" />\n\n    <label>\n      peakThreshold : {{ peakThreshold }}\n      <input\n        type=\"range\"\n        min=\"0.0001\"\n        max=\"0.005\"\n        step=\"0.0001\"\n        v-model=\"peakThreshold\"\n        @input=\"(e) => createTitles()\"\n      />\n    </label>\n\n    <label>\n      spaceCounterThreshold : {{ spaceCounterThreshold }}\n      <input\n        type=\"range\"\n        min=\"1\"\n        max=\"1000\"\n        v-model=\"spaceCounterThreshold\"\n        @input=\"(e) => createTitles()\"\n      />\n    </label>\n\n    <button @click=\"wavesurfer.play(0)\">Play From Start</button>\n    <button @click=\"wavesurfer.playPause()\">Play</button>\n  </div>\n\n  <!-- <input type=\"file\" inpu -->\n  <!-- <hr /> -->\n\n  <footer>\n    <div id=\"waveform\"></div>\n    <div id=\"wave-timeline\"></div>\n  </footer>\n\n  <div id=\"flex-container\">\n    <div>\n      <h2>3.輸入文字稿</h2>\n      <textarea\n        id=\"input-script\"\n        v-model=\"inputScript\"\n        @keyup=\"(e) => createTitles()\"\n      />\n    </div>\n    <div>\n      <h2>InputScript</h2>\n      <!-- <textarea v-model=\"inputScriptArray\" /> -->\n      <pre>\n{{inputScriptArray}}\n\nArray Length : {{inputScriptArray.length}}\n      </pre>\n    </div>\n    <div>\n      <h2>4.FCPXML</h2>\n      <textarea class=\"xml-debug\" v-model=\"fcpxml\" />\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport WaveSurfer from \"wavesurfer.js\";\nimport RegionsPlugin from \"wavesurfer.js/dist/plugin/wavesurfer.regions.min.js\";\nimport CursorPlugin from \"wavesurfer.js/dist/plugin/wavesurfer.cursor.min.js\";\nimport Timeline from \"wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js\";\nimport Big from 'big.js'\n// import HelloWorld from './components/HelloWorld.vue'\nvar demoScript = `硬質化是部分九大巨人所擁有的能力，使用硬質化可以強化身體硬度來增加防禦或攻擊力，但也會消耗自身的體力，不同巨人對硬質化的運用有所不同，部分巨人只能硬化皮膚或用硬質化製造無規律物品，而對硬質化運用熟練的巨人不僅可隨意製造武器或是建築，甚至能硬質化出有彈性的物體。\n\n不同的巨人硬質化的硬度有所不同，同一硬度的硬質化，硬質化越集中則越堅硬，反之，硬質化越分散則越脆。\n\n並非所有巨人都擁有硬質化的能力，無硬質化能力的九大巨人之力擁有者可通過喝下“鎧甲藥劑”來獲得硬質化的能力。`;\n\n\nimport createXML from './createXML'\n\nexport default {\n  name: \"App\",\n  components: {\n    // HelloWorld\n  },\n  data() {\n    return {\n      // inputScript: '',\n      fcpxml: '',\n      inputScript: demoScript,\n      wavesurfer: undefined,\n      peaks: [],\n      // spaceCounterThreshold: 350,\n      spaceCounterThreshold: 218,\n      peakThreshold: 0.0005,\n      resolution: 1000,\n      createTitleDebounce: null,\n      azureLink: 'https://azure.microsoft.com/zh-tw/products/cognitive-services/text-to-speech/#overview'\n    };\n  },\n  mounted() {\n    this.createWaveSurfer();\n\n    if (module.hot) {\n      const hotEmitter = require(\"webpack/hot/emitter\");\n\n      hotEmitter.on(\"webpackHotUpdate\", () => {\n        clearTimeout(this.createTitleDebounce);\n      });\n    }\n  },\n  methods: {\n    createTitles() {\n      clearTimeout(this.createTitleDebounce);\n      this.createTitleDebounce = setTimeout(() => {\n        this._createTitles();\n      }, 300);\n    },\n    _createTitles() {\n      var { inputScriptArray, wavesurfer } = this;\n\n      // remove old titles\n      this.fcpxml = ''\n      wavesurfer.clearRegions();\n\n      var duration = new Big(wavesurfer.getDuration());\n      var peaks = wavesurfer.backend.getPeaks((duration / 2) * this.resolution);\n      var start = 0;\n      var spaceCounter = 0;\n      var titles = [];\n\n\n\n\n\n      for (let index = 0; index < peaks.length; index++) {\n        const v = peaks[index];\n        var currentTime = new Big(index + 1).div(this.resolution).toNumber()\n\n        let nextPeak = peaks[index + 1];\n\n        if (Math.abs(v) <= this.peakThreshold) {\n          spaceCounter = spaceCounter + 1;\n        }\n        else if (\n          currentTime > 1 &&\n          spaceCounter >= this.spaceCounterThreshold &&\n          Math.abs(nextPeak) >= this.peakThreshold\n        ) {\n          spaceCounter = 0;\n\n          if (titles.length >= inputScriptArray.length) break\n\n          titles.push({\n            id: inputScriptArray[titles.length],\n            start,\n            end: currentTime,\n            drag: false,\n            duration: new Big(currentTime).minus(start).toNumber()\n          });\n\n          start = currentTime;\n        }\n      }\n\n      if (\n        inputScriptArray[inputScriptArray.length - 1] !==\n        inputScriptArray[titles.length - 1]\n      ) {\n        const start = titles[titles.length - 1][\"end\"]\n        titles.push({\n          id: inputScriptArray[inputScriptArray.length - 1],\n          start: start,\n          end: duration.toNumber(),\n          duration: duration.minus(start).toNumber()\n        });\n\n        // console.log('duration.toNumber()', duration.toNumber())\n      }\n\n      // console.log(\"duration: \" + duration + \" peaks: \" + peaks.length);\n\n      // titles.forEach((_) => {\n      //   wavesurfer.addRegion(_);\n      // });\n\n      // make sure last one is cover to the end\n      titles[titles.length - 1]['end'] = duration.toNumber()\n\n      for (let index = 0; index < titles.length; index++) {\n        const element = titles[index];\n\n        setTimeout(() =>{\n          wavesurfer.addRegion(element);\n          // console.log(element)\n        }, 10 * index)\n      }\n\n      this.fcpxml = createXML(titles)\n\n      console.table(titles)\n\n      // console.log(wavesurfer.regions.list)\n    },\n    audioSourceChanged(e) {\n      // eslint-disable-next-line no-debugger\n      var wavesurfer = this.wavesurfer;\n      var file = e.target.files[0];\n\n      if (file) {\n        var reader = new FileReader();\n\n        reader.onload = function (evt) {\n          // Create a Blob providing as first argument a typed array with the file buffer\n          var blob = new window.Blob([new Uint8Array(evt.target.result)]);\n\n          // Load the blob into Wavesurfer\n          wavesurfer.loadBlob(blob);\n        };\n\n        reader.onerror = function (evt) {\n          console.error(\"An error ocurred reading the file: \", evt);\n        };\n\n        // Read File as an ArrayBuffer\n        reader.readAsArrayBuffer(file);\n      }\n    },\n    createWaveSurfer() {\n      console.log('createWaveSurfer')\n      var wavesurfer = WaveSurfer.create({\n        container: \"#waveform\",\n        progressColor: \"purple\",\n        normalize: true,\n        // partialRender: true,\n        minPxPerSec: 50,\n        height: 300,\n        scrollParent: true,\n        plugins: [\n          Timeline.create({\n            container: \"#wave-timeline\",\n          }),\n          CursorPlugin.create(),\n          RegionsPlugin.create({\n            drag:false\n          }),\n        ],\n      });\n\n      // console.log(process.env.BASE_URL)\n      // demo audio file\n      wavesurfer.load(\"./2022-10-19 07_17_55.mp3\");\n\n      wavesurfer.on(\"ready\", () => {\n        console.log('wavesurfer ready')\n        this.createTitles();\n      });\n\n      wavesurfer.on(\"seek\", (_) => {\n        wavesurfer.play(_ * wavesurfer.getDuration())\n        console.log('currentTime', _ * wavesurfer.getDuration())\n      });\n\n      this.wavesurfer = wavesurfer;\n    },\n  },\n  computed: {\n    inputScriptArray() {\n      console.log(\"inputScriptArray changed\");\n      var strings = [];\n\n      this.inputScript\n        .toString()\n        .split(\"\\n\")\n        .forEach((_) => {\n          let __ = _.split(/，|？/);\n\n          __.forEach((s) => {\n\n            s.split('?')\n            if (s.length > 0) {\n              s = s.replace(\"。\", \"\");\n              s = s.replaceAll(\"\\\"\", \"\");\n              s = s.replaceAll(\",\", \"\");\n              s = s.trim()\n\n              strings.push(s);\n            }\n          });\n        });\n      return strings;\n    },\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\n#flex-container {\n  display: flex;\n  justify-content: space-between;\n}\n\n#flex-container div{\n  width: 33%;\n}\n\ntextarea {\n  padding: 0.5em;\n  width: 95%;\n  height: 500px;\n}\n\npre {\n  text-align: left;\n}\n\n.buttons{\n  padding: 5em 0;\n}\n\nregion::before {\n  top:1em;\n  position: relative;\n  content: attr(data-id);\n}\n\n.text-debug {\n  width: 25%;\n  overflow: scroll;\n  float: right;\n}\n\nfooter {\n  /* margin-top: 5em; */\n}\n\n/* .azure-ai {\n  margin-top: 5em;\n  display: block;\n} */\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=63f12a25\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=63f12a25&lang=css\"\n\nimport exportComponent from \"/Users/zack/projects/auto-script-to-final-cut-xml/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkauto_script_to_final_cut_xml\"] = self[\"webpackChunkauto_script_to_final_cut_xml\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9991); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["Big","require","createXML","titles","totalDuration","length","toFixed","times","toNumber","map","createTitle","join","title","index","duration","end","minus","start","parseFloat","offset","tmp","id","DP","module","exports","class","_createElementVNode","href","$data","target","_hoisted_2","_hoisted_3","type","onChange","$options","min","max","step","onInput","e","onClick","play","playPause","_hoisted_4","_hoisted_5","_hoisted_6","onKeyup","_hoisted_7","_hoisted_8","demoScript","name","components","data","fcpxml","inputScript","wavesurfer","undefined","peaks","spaceCounterThreshold","peakThreshold","resolution","createTitleDebounce","azureLink","mounted","this","createWaveSurfer","methods","createTitles","clearTimeout","setTimeout","_createTitles","inputScriptArray","clearRegions","getDuration","backend","getPeaks","spaceCounter","v","currentTime","div","nextPeak","Math","abs","push","drag","element","addRegion","console","table","audioSourceChanged","file","files","reader","FileReader","onload","evt","blob","window","Blob","Uint8Array","result","loadBlob","onerror","error","readAsArrayBuffer","log","WaveSurfer","container","progressColor","normalize","minPxPerSec","height","scrollParent","plugins","Timeline","CursorPlugin","RegionsPlugin","load","on","_","computed","strings","toString","split","forEach","__","s","replace","replaceAll","trim","__exports__","render","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}